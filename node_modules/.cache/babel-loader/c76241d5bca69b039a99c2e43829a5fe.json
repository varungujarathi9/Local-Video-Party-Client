{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/aravind/Documents/projects/Local-Video-Party-Client/client/src/components/Lobby.jsx\";\n\n/**\n * TODO: Dont show next for joinees\n * TODO: socket listen to new-joinee, if joinee listen to video-started\n */\nimport { navigate } from '@reach/router';\nimport React from 'react';\nimport { serverSocket } from './helper/connection';\nimport style from './Lobby.module.css';\nimport { AvatarArr } from './Avatar';\nimport BackIcon from '../images/BackIcon.png';\nimport UploadIcon from '../images/Upload.png';\nexport default class Lobby extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleFile = e => {\n      this.setState({\n        videoStartError: ''\n      });\n      e.preventDefault();\n      var filelist = document.getElementById('videofile').files[0];\n\n      if (filelist !== undefined) {\n        console.log(filelist);\n        var typeOfFile = filelist.type;\n        console.log(typeOfFile);\n        var file = e.target.value.replace(/^.*[\\\\]/, '');\n        this.setState({\n          fileName: file\n        });\n        var extensionVal = typeOfFile.split('/');\n        console.log(extensionVal);\n\n        if (this.state.extension.includes(extensionVal[1])) {\n          this.setState({\n            extensionCheck: true,\n            errorMsg: '',\n            videoStreamFlag: true\n          });\n        } else {\n          this.setState({\n            errorMsg: \"Please provide valid file\",\n            extensionCheck: false,\n            videoStreamFlag: false\n          });\n        }\n\n        var fileUrl = URL.createObjectURL(filelist).split();\n        sessionStorage.setItem('video_file', fileUrl);\n      } else {\n        this.setState({\n          errorMsg: \"\",\n          extensionCheck: false,\n          videoStreamFlag: false\n        });\n      }\n    };\n\n    this.startVideo = async () => {\n      if (this.state.userType === 'creator') {\n        serverSocket.emit('start-video', {\n          room_id: sessionStorage.getItem('room-id')\n        });\n      }\n    };\n\n    this.leaveRoom = () => {\n      if (sessionStorage.getItem('user-type') === 'joinee') {\n        serverSocket.emit('remove-member', {\n          username: this.state.username,\n          roomID: this.state.roomID\n        });\n      } else {\n        serverSocket.emit('remove-all-member', {\n          username: this.state.username,\n          roomID: this.state.roomID\n        });\n      }\n    };\n\n    this.readyForVideo = () => {\n      if (this.state.userType === 'joinee') {\n        if (this.state.fileName === '' || this.state.fileName === null) {\n          // TODO change alert to UI\n          this.setState({\n            videoStreamFlag: true\n          });\n          sessionStorage.setItem('video_file', null);\n        } else {\n          this.setState({\n            videoStreamFlag: false\n          });\n        }\n\n        if (this.state.ready === false) {\n          document.getElementById('readyButton').innerHTML = 'Cancel';\n          document.getElementById('videofile').disabled = true;\n          this.setState({\n            ready: true\n          });\n          serverSocket.emit('update-member-status', {\n            roomID: this.state.roomID,\n            username: this.state.username,\n            ready: true\n          });\n        } else {\n          document.getElementById('readyButton').innerHTML = 'Ready for partying';\n          document.getElementById('videofile').disabled = false;\n          this.setState({\n            ready: false\n          });\n          serverSocket.emit('update-member-status', {\n            roomID: this.state.roomID,\n            username: this.state.username,\n            ready: false\n          });\n        }\n      }\n    };\n\n    this.capitalizeUsername = () => {\n      var username = sessionStorage.getItem('username');\n      var finalUsername = username.charAt(0).toUpperCase() + username.slice(1);\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: style.creatorName,\n        children: [finalUsername, \"'s Room\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }, this);\n    };\n\n    this.handleMessageChange = event => {\n      event.preventDefault();\n      this.setState({\n        message: event.target.value\n      });\n    };\n\n    this.sendMsg = event => {\n      event.preventDefault();\n\n      if (this.state.message !== '') {\n        serverSocket.emit('send-message', {\n          senderName: this.state.username,\n          roomID: this.state.roomID,\n          message: this.state.message\n        });\n      }\n\n      document.getElementById(\"chat\").value = \"\";\n    };\n\n    this.openFileUpload = e => {\n      this.fileUploader.current.click();\n    };\n\n    this.state = {\n      userType: '',\n      username: '',\n      roomDetails: '',\n      fileName: '',\n      extension: [\"mp4\", \"mkv\", \"x-msvideo\", \"x-matroska\"],\n      extensionValid: false,\n      fileError: '',\n      videoStreamFlag: true,\n      ready: false,\n      messages: [],\n      message: ''\n    };\n    this.fileUploader = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    if (sessionStorage.getItem('user-type') === 'creator' || sessionStorage.getItem('user-type') === 'joinee') {\n      this.setState({\n        userType: sessionStorage.getItem('user-type')\n      });\n    } else {\n      navigate('/');\n    }\n\n    if (sessionStorage.getItem('room-details') !== null || sessionStorage.getItem('room-details') !== '') {\n      // console.log(JSON.parse(sessionStorage.getItem('room-details').replace(/\"/g,'\\\"')))\n      this.setState({\n        roomDetails: JSON.parse(sessionStorage.getItem('room-details').replace(/\"/g, '\\\"'))\n      });\n    } else {\n      navigate('/');\n    }\n\n    if (sessionStorage.getItem('username') !== null || sessionStorage.getItem('username') !== '') {\n      this.setState({\n        username: sessionStorage.getItem('username')\n      });\n    } else {\n      navigate('/');\n    }\n\n    if (sessionStorage.getItem('room-id') !== null || sessionStorage.getItem('room-id') !== '') {\n      this.setState({\n        roomID: sessionStorage.getItem('room-id')\n      });\n    } else {\n      navigate('/');\n    }\n\n    serverSocket.on('update-room-details', data => {\n      // console.log(data)\n      sessionStorage.setItem('room-details', JSON.stringify(data)); // sessionStorage.setItem('room-members',JSON.stringify(data['members']))\n\n      this.setState({\n        roomDetails: JSON.parse(JSON.stringify(data))\n      });\n\n      if (this.state.ready && JSON.parse(JSON.stringify(data))['started']) {\n        // createPeerConnection() \n        sessionStorage.setItem('video-stream-flag', this.state.videoStreamFlag);\n        navigate('/video-player');\n      }\n    });\n    serverSocket.on('video-started', data => {\n      // createPeerConnection() \n      sessionStorage.setItem('video-stream-flag', this.state.videoStreamFlag); // handleSignalingData({'sdp':data['sesDetails'],'type':data['typeOfSdp']})\n\n      navigate('/video-player');\n    });\n    serverSocket.on('left_room', data => {\n      sessionStorage.setItem('room-details', JSON.stringify(data)); // sessionStorage.setItem('room-members',JSON.stringify(data['members']))\n\n      this.setState({\n        roomDetails: JSON.parse(JSON.stringify(data))\n      });\n      navigate('/');\n    });\n    serverSocket.on('all_left', data => {\n      // console.log(data)\n      sessionStorage.setItem('room-details', JSON.stringify(data)); // sessionStorage.setItem('room-members',JSON.stringify(data['members']))\n\n      this.setState({\n        roomDetails: JSON.parse(JSON.stringify(data))\n      });\n      navigate('/');\n    });\n    serverSocket.on('receive_message', data => {\n      console.log(data);\n      sessionStorage.setItem('messages', data);\n      this.setState({\n        messages: data\n      });\n    });\n    serverSocket.emit('get-all-messages', {\n      roomID: sessionStorage.getItem('room-id')\n    });\n  }\n\n  render() {\n    var {\n      roomDetails,\n      messages,\n      videoStreamFlag\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.left,\n        children: [sessionStorage.getItem('user-type') === 'creator' && this.capitalizeUsername(), sessionStorage.getItem('user-type') === 'creator' && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: style.roomId,\n          children: [\"Room ID: \", this.state.roomID]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 70\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: style.memTitle,\n          children: [\"Members in Lobby\", /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: style.memberDisplay,\n              children: roomDetails !== '' && Object.keys(roomDetails.members).length > 0 && Object.keys(roomDetails.members).map(item => {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: style.imgndtext,\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    className: style.memberImg,\n                    src: AvatarArr[roomDetails.members[item]],\n                    alt: \"avatarimg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: item\n                  }, item, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 29\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this)\n          }, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: style.leaveRoomBtn,\n          onClick: this.leaveRoom,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style.leaveBtnDiv,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: style.leaveBtnImg,\n              src: BackIcon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 24\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: style.leaveBtnTxt,\n              children: \"Leave Room\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 24\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 20\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.right,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.uploadFile,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: UploadIcon,\n            alt: \"uploadIcon\",\n            onClick: this.openFileUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: this.fileUploader,\n          className: style.inputFile,\n          type: \"file\",\n          id: \"videofile\",\n          onChange: this.handleFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this), this.state.extensionCheck ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.fileCheck,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: style.fileName,\n            children: this.state.fileName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 29\n          }, this), sessionStorage.getItem('user-type') === 'creator' && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: style.startPlaying,\n            onClick: this.startVideo,\n            children: \"Start partying\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 83\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            color: 'red'\n          },\n          children: this.state.errorMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.fileCheck,\n          children: [sessionStorage.getItem('user-type') === 'joinee' && this.state.ready && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: 'blue'\n            },\n            children: \"Waiting for the host to start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 90\n          }, this), sessionStorage.getItem('user-type') === 'joinee' && /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"readyButton\",\n            className: style.startPlaying,\n            onClick: this.readyForVideo,\n            children: \"Ready for partying\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 70\n          }, this), sessionStorage.getItem('user-type') === 'joinee' && (videoStreamFlag ? /*#__PURE__*/_jsxDEV(\"h6\", {\n            style: {\n              color: 'red'\n            },\n            children: \"You have not selected any file, video will be stream to you directly\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 87\n          }, this) : /*#__PURE__*/_jsxDEV(\"h6\", {\n            style: {\n              color: 'green'\n            },\n            children: \"Your selected file would be played\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 190\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/aravind/Documents/projects/Local-Video-Party-Client/client/src/components/Lobby.jsx"],"names":["navigate","React","serverSocket","style","AvatarArr","BackIcon","UploadIcon","Lobby","Component","constructor","props","handleFile","e","setState","videoStartError","preventDefault","filelist","document","getElementById","files","undefined","console","log","typeOfFile","type","file","target","value","replace","fileName","extensionVal","split","state","extension","includes","extensionCheck","errorMsg","videoStreamFlag","fileUrl","URL","createObjectURL","sessionStorage","setItem","startVideo","userType","emit","room_id","getItem","leaveRoom","username","roomID","readyForVideo","ready","innerHTML","disabled","capitalizeUsername","finalUsername","charAt","toUpperCase","slice","creatorName","handleMessageChange","event","message","sendMsg","senderName","openFileUpload","fileUploader","current","click","roomDetails","extensionValid","fileError","messages","createRef","componentDidMount","JSON","parse","on","data","stringify","render","left","roomId","memTitle","memberDisplay","Object","keys","members","length","map","item","imgndtext","memberImg","leaveRoomBtn","leaveBtnDiv","leaveBtnImg","leaveBtnTxt","right","uploadFile","inputFile","fileCheck","startPlaying","color"],"mappings":"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","sourcesContent":["/**\n * TODO: Dont show next for joinees\n * TODO: socket listen to new-joinee, if joinee listen to video-started\n */\n\nimport { navigate } from '@reach/router'\nimport React from 'react'\nimport { serverSocket } from './helper/connection'\nimport style from './Lobby.module.css'\nimport {AvatarArr} from './Avatar'\nimport BackIcon from '../images/BackIcon.png'\nimport UploadIcon from '../images/Upload.png'\n\nexport default class Lobby extends React.Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            userType: '',\n            username: '',\n            roomDetails: '',\n            fileName: '',\n            extension: [\"mp4\", \"mkv\", \"x-msvideo\", \"x-matroska\"],\n            extensionValid: false,\n            fileError: '',\n            videoStreamFlag: true,\n            ready: false,\n            messages: [],\n            message: '',\n        }\n        this.fileUploader = React.createRef()\n    }\n    \n\n    componentDidMount(){\n\n        if (sessionStorage.getItem('user-type') === 'creator' || sessionStorage.getItem('user-type') === 'joinee' ){\n            this.setState({userType: sessionStorage.getItem('user-type')})\n        }\n        else{\n            navigate('/')\n        }\n\n        if (sessionStorage.getItem('room-details') !== null || sessionStorage.getItem('room-details') !== '' ){\n            // console.log(JSON.parse(sessionStorage.getItem('room-details').replace(/\"/g,'\\\"')))\n            this.setState({roomDetails: JSON.parse(sessionStorage.getItem('room-details').replace(/\"/g,'\\\"'))})\n        }\n        else{\n            navigate('/')\n        }\n\n        if (sessionStorage.getItem('username') !== null || sessionStorage.getItem('username') !== '' ){\n            this.setState({username: sessionStorage.getItem('username')})\n        }\n        else{\n            navigate('/')\n        }\n\n        if (sessionStorage.getItem('room-id') !== null || sessionStorage.getItem('room-id') !== '' ){\n            this.setState({roomID: sessionStorage.getItem('room-id')})\n        }\n        else{\n            navigate('/')\n        }\n\n        serverSocket.on('update-room-details', (data)=>{\n            // console.log(data)\n            sessionStorage.setItem('room-details', JSON.stringify(data))\n            // sessionStorage.setItem('room-members',JSON.stringify(data['members']))\n            this.setState({\n                roomDetails: JSON.parse(JSON.stringify(data)),\n            })\n            if(this.state.ready && JSON.parse(JSON.stringify(data))['started']){\n                // createPeerConnection() \n                sessionStorage.setItem('video-stream-flag', this.state.videoStreamFlag)\n                navigate('/video-player')\n            }\n        })\n\n        serverSocket.on('video-started', (data)=>{\n            // createPeerConnection() \n            sessionStorage.setItem('video-stream-flag', this.state.videoStreamFlag)\n            // handleSignalingData({'sdp':data['sesDetails'],'type':data['typeOfSdp']})\n            navigate('/video-player')\n            \n        })\n\n        serverSocket.on('left_room',data=>{\n            sessionStorage.setItem('room-details', JSON.stringify(data))\n            // sessionStorage.setItem('room-members',JSON.stringify(data['members']))\n            this.setState({\n                roomDetails: JSON.parse(JSON.stringify(data)),\n\n            })\n            navigate('/')\n        })\n\n        serverSocket.on('all_left',data=>{\n            // console.log(data)\n            sessionStorage.setItem('room-details', JSON.stringify(data))\n            // sessionStorage.setItem('room-members',JSON.stringify(data['members']))\n            this.setState({\n                roomDetails: JSON.parse(JSON.stringify(data)),\n            })\n            navigate('/')\n        })\n\n        serverSocket.on('receive_message',data=>{\n            console.log(data)\n            sessionStorage.setItem('messages', data)\n            this.setState({\n                messages: data,\n            })\n        })\n        serverSocket.emit('get-all-messages',{roomID:sessionStorage.getItem('room-id')})\n    }\n\n\n\n\n    handleFile = (e) => {\n        this.setState({\n            videoStartError:''\n        })\n        e.preventDefault()\n\n        var filelist = document.getElementById('videofile').files[0]\n        if (filelist !== undefined){\n            console.log(filelist)\n            var typeOfFile = filelist.type\n            console.log(typeOfFile)\n            var file = e.target.value.replace(/^.*[\\\\]/, '')\n\n            this.setState({\n                fileName: file,\n            })\n\n            var extensionVal = typeOfFile.split('/')\n            console.log(extensionVal)\n\n            if (this.state.extension.includes(extensionVal[1])) {\n                this.setState({\n                    extensionCheck: true,\n                    errorMsg: '',\n                    videoStreamFlag: true\n                })\n            }\n            else {\n                this.setState({\n                    errorMsg: \"Please provide valid file\",\n                    extensionCheck: false,\n                    videoStreamFlag: false\n                })\n            }\n            var fileUrl = URL.createObjectURL(filelist).split()\n            sessionStorage.setItem('video_file', fileUrl)\n        }\n        else {\n            this.setState({\n                errorMsg: \"\",\n                extensionCheck: false,\n                videoStreamFlag: false\n            })\n        }\n    }\n\n    startVideo = async () =>{\n        if(this.state.userType === 'creator'){\n            serverSocket.emit('start-video', {room_id:sessionStorage.getItem('room-id')})\n        }\n    }\n\n\n    leaveRoom =() =>{\n        if(sessionStorage.getItem('user-type') === 'joinee'){\n            serverSocket.emit('remove-member',{username:this.state.username, roomID:this.state.roomID})\n        }\n        else{\n            serverSocket.emit('remove-all-member',{username:this.state.username, roomID:this.state.roomID})\n        }\n    }\n\n    readyForVideo = () => {\n        if(this.state.userType === 'joinee'){\n            if ( this.state.fileName === '' || this.state.fileName === null){\n                // TODO change alert to UI\n                this.setState({\n                    videoStreamFlag: true\n                })\n                sessionStorage.setItem('video_file', null)\n            }\n            else{\n                this.setState({\n                    videoStreamFlag: false\n                })\n            }\n\n            if (this.state.ready === false){\n                document.getElementById('readyButton').innerHTML = 'Cancel'\n                document.getElementById('videofile').disabled = true\n                this.setState({\n                    ready: true\n                })\n                serverSocket.emit('update-member-status',{roomID:this.state.roomID, username:this.state.username, ready:true})\n            }\n            else{\n                document.getElementById('readyButton').innerHTML = 'Ready for partying'\n                document.getElementById('videofile').disabled = false\n                this.setState({\n                    ready: false\n                })\n                serverSocket.emit('update-member-status',{roomID:this.state.roomID, username:this.state.username, ready:false})\n            }\n       }\n    }\n\n    capitalizeUsername = () =>{\n        var username  = sessionStorage.getItem('username')\n        var finalUsername = username.charAt(0).toUpperCase()+username.slice(1)\n        return(\n            <p className={style.creatorName}>\n                {finalUsername}'s Room\n                \n            </p>\n        )\n    }\n\n    \n                \n    handleMessageChange = (event) => {\n        event.preventDefault()\n        this.setState({\n            message: event.target.value\n        })\n    }\n\n    sendMsg = (event) =>{\n        event.preventDefault()\n        if(this.state.message !== ''){\n            serverSocket.emit('send-message',{senderName:this.state.username, roomID:this.state.roomID, message:this.state.message})\n        }\n        document.getElementById(\"chat\").value = \"\"\n    }\n\n    openFileUpload =(e)=>{\n        this.fileUploader.current.click()\n    }\n\n    render() {\n        var {roomDetails,messages,videoStreamFlag} = this.state\n        \n        return (\n            <div>\n                <div className={style.left}>\n                {sessionStorage.getItem('user-type') === 'creator' && this.capitalizeUsername()}\n                {sessionStorage.getItem('user-type') === 'creator' &&<p className={style.roomId}>Room ID: {this.state.roomID}</p>}\n                <p className={style.memTitle}>Members in Lobby\n                <>\n                <div className={style.memberDisplay}>\n                {roomDetails !== '' && Object.keys(roomDetails.members).length > 0 && Object.keys(roomDetails.members).map((item)=>{\n                    return (\n                            <div className={style.imgndtext}>                              \n                            <img className={style.memberImg}src={AvatarArr[roomDetails.members[item]]} alt=\"avatarimg\"/> \n                            <span key={item}>{item}</span>\n                             </div>\n                       \n                    )\n                })}\n                </div>\n                </>\n                \n               </p>\n               <button className={style.leaveRoomBtn}onClick={this.leaveRoom}>\n                   <div className={style.leaveBtnDiv}>\n                       <img  className={style.leaveBtnImg} src={BackIcon}/>\n                       <p  className={style.leaveBtnTxt}>Leave Room</p>\n                   </div>\n                </button>\n\n                </div>\n               \n\n                <div className={style.right}>\n                    <div className={style.uploadFile}>\n                        <img src={UploadIcon} alt=\"uploadIcon\" onClick={this.openFileUpload}/>\n                    </div>\n                    <input ref={this.fileUploader} className={style.inputFile} type=\"file\" id=\"videofile\" onChange={this.handleFile} />\n                    \n                      \n               \n                    {this.state.extensionCheck ?\n                        <div className={style.fileCheck}>\n                            <p className={style.fileName}>{this.state.fileName}</p>\n                            {sessionStorage.getItem('user-type') === 'creator' && <button className={style.startPlaying}onClick={this.startVideo}>Start partying</button>}\n                        </div>\n\n                        : <h4 style={{ color: 'red' }}>{this.state.errorMsg}</h4>}\n                 <div className={style.fileCheck}>\n                {sessionStorage.getItem('user-type') === 'joinee' && this.state.ready && <p style={{ color: 'blue' }}>Waiting for the host to start</p>}\n                {sessionStorage.getItem('user-type') === 'joinee' && <button id='readyButton' className={style.startPlaying} onClick={this.readyForVideo}>Ready for partying</button>}\n                {sessionStorage.getItem('user-type') === 'joinee' && (videoStreamFlag?<h6 style={{ color: 'red' }}>You have not selected any file, video will be stream to you directly</h6>:<h6 style={{ color: 'green' }}>Your selected file would be played</h6>)}\n                </div>\n                </div>\n                \n               \n                \n               \n                {/* <h4>Room I.D.</h4>\n                {this.state.roomID}\n                <h4>Room Members</h4>\n                {roomDetails !== '' && Object.keys(roomDetails.members).length > 0 && Object.keys(roomDetails.members).map((username)=>{\n                    return (\n                        <p key={username}>{username}:{roomDetails.members[username]?\"ready\":\"not ready\"}</p>\n                    )\n                })}\n                <h4>Text Channel</h4>\n                {messages.length > 0 && messages.map((message)=>{\n                    return(\n                    <p key={message[\"messageNumber\"]}>{message[\"senderName\"]}:{message[\"message\"]}</p>\n                    )\n                })}\n                <input type=\"text\" name='chat' id='chat' onChange={this.handleMessageChange}></input>\n                <button onClick={this.sendMsg}>Send</button>\n                <br/>\n                <button onClick={this.leaveRoom}>Leave Room</button> */}\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}